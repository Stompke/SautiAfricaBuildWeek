{"ast":null,"code":"import _slicedToArray from \"/Users/shawntompke/Desktop/Lambda-Projects/week8/shawn/SautiAfricaBuildWeek/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/shawntompke/Desktop/Lambda-Projects/week8/shawn/SautiAfricaBuildWeek/src/components/Register.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\nimport { withFormik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\nimport { inputStyle, formStyle, labelStyle } from '../styles/FormStyles';\nimport { MainSection, FormContainer, CustomButton } from '../StyledComponents/MainComponents';\nimport NextBackNavigation from './NextBackNavigation';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Card, Button, CardTitle, CardText, Row, Col } from 'reactstrap';\nimport axios from 'axios';\n\nconst Register = props => {\n  const _useState = useState({\n    username: \"\",\n    password: \"\",\n    email: \"\"\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        credentials = _useState2[0],\n        setCredentials = _useState2[1];\n\n  const errors = props.errors,\n        touched = props.touched; // const handleChange = e => {\n  //     e.preventDefault();\n  //     setCredentials({\n  //         ...credentials,\n  //         [e.target.name]: e.target.value\n  //     });\n  // };\n  // const register = e => {\n  //     e.preventDefault();\n  //     let name = credentials.username;\n  //     axiosWithAuth()    \n  //         .post(`https://build-week-africanmarketplace.herokuapp.com/api/auth/register`,\n  //             credentials,\n  //         )\n  //         .then(res => {\n  //             axiosWithAuth()\n  //                 .get('https://build-week-africanmarketplace.herokuapp.com/api/users')\n  //                 .then(res => {\n  //                     console.log(name);\n  //                     var found = res.data.find(function (element) {\n  //                         return element.username === name;\n  //                     });\n  //                     this.props.dispatch({ type: 'USERNAME', username: found.id });\n  //                 })\n  //                 .catch(err => console.log(err)); \n  //             localStorage.setItem('token', res.data.token);\n  //             props.history.push('/market-price');\n  //         })\n  //         .catch(err => {\n  //             console.log(err.response);\n  // alert(\"Wrong user or password\");\n  //         });\n  // }\n\n  return React.createElement(MainSection, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(NextBackNavigation, {\n    back: () => props.history.goBack(),\n    next: () => props.history.goForward(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"image-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(FormContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(Form, {\n    style: formStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    style: labelStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"YOUR INFORMATION\"), React.createElement(Field, {\n    style: inputStyle,\n    type: \"text\",\n    name: \"username\",\n    placeholder: \"USERNAME\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(Field, {\n    style: inputStyle,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"EMAIL\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(Field, {\n    style: inputStyle,\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"PASSWORD\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(CustomButton, {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Sign Up\"), React.createElement(Link, {\n    to: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"create account\"), touched.username && errors.username && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, errors.username), touched.email && errors.email && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, errors.email), touched.password && errors.password && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, errors.password))));\n};\n\nconst FormikRegister = withFormik({\n  mapPropsToValues({\n    username,\n    password,\n    email\n  }) {\n    return {\n      username: '',\n      password: '',\n      email: ''\n    };\n  },\n\n  handleSubmit(values, {\n    props,\n    setStatues,\n    resetForm\n  }) {\n    console.group('submitting...', values);\n    let name = values.username;\n    axiosWithAuth().post(\"https://build-week-africanmarketplace.herokuapp.com/api/auth/register\", values).then(res => {\n      axiosWithAuth().get('https://build-week-africanmarketplace.herokuapp.com/api/users').then(res => {\n        console.log(name);\n        var found = res.data.find(function (element) {\n          return element.username === name;\n        }); // console.log(this.props);\n\n        console.log(props);\n        props.dispatch({\n          type: 'USERNAME',\n          username: found.id\n        });\n      }).catch(err => console.log(err));\n      localStorage.setItem('token', res.data.token);\n      props.history.push('/market-price');\n    }).catch(err => {\n      console.log(err.response);\n      alert(\"Wrong user or password\");\n    });\n  },\n\n  validationSchema: Yup.object().shape({\n    username: Yup.string().required(\"Username is a required field\"),\n    password: Yup.string().min(6, \"Password must be at least 6 characters\").required(\"Password is a required field\"),\n    email: Yup.string().email('Invalid Email').required(\"email is a required field\")\n  })\n})(Register); // export default FormikRegister;\n\nexport default connect()(FormikRegister);","map":{"version":3,"sources":["/Users/shawntompke/Desktop/Lambda-Projects/week8/shawn/SautiAfricaBuildWeek/src/components/Register.js"],"names":["React","useState","useEffect","axiosWithAuth","withFormik","Form","Field","Yup","inputStyle","formStyle","labelStyle","MainSection","FormContainer","CustomButton","NextBackNavigation","connect","Link","Card","Button","CardTitle","CardText","Row","Col","axios","Register","props","username","password","email","credentials","setCredentials","errors","touched","history","goBack","goForward","FormikRegister","mapPropsToValues","handleSubmit","values","setStatues","resetForm","console","group","name","post","then","res","get","log","found","data","find","element","dispatch","type","id","catch","err","localStorage","setItem","token","push","response","alert","validationSchema","object","shape","string","required","min"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\nimport { withFormik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\nimport { inputStyle, formStyle, labelStyle} from '../styles/FormStyles';\nimport { MainSection, FormContainer, CustomButton} from '../StyledComponents/MainComponents';\nimport NextBackNavigation from './NextBackNavigation';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { Card, Button, CardTitle, CardText, Row, Col } from 'reactstrap';\n\n\n\n\n\n\nimport axios from 'axios';\n\nconst Register = (props) => {\n    const [credentials, setCredentials] = useState({\n        username: \"\",\n        password: \"\",\n        email: \"\",\n    })\n\n\n    const {\n        errors,\n        touched,\n    } = props;\n\n    // const handleChange = e => {\n    //     e.preventDefault();\n    //     setCredentials({\n    //         ...credentials,\n    //         [e.target.name]: e.target.value\n    //     });\n    // };\n\n    // const register = e => {\n    //     e.preventDefault();\n    //     let name = credentials.username;\n    //     axiosWithAuth()    \n    //         .post(`https://build-week-africanmarketplace.herokuapp.com/api/auth/register`,\n    //             credentials,\n    //         )\n    //         .then(res => {\n    //             axiosWithAuth()\n    //                 .get('https://build-week-africanmarketplace.herokuapp.com/api/users')\n    //                 .then(res => {\n    //                     console.log(name);\n    //                     var found = res.data.find(function (element) {\n    //                         return element.username === name;\n    //                     });\n    //                     this.props.dispatch({ type: 'USERNAME', username: found.id });\n    //                 })\n    //                 .catch(err => console.log(err)); \n    //             localStorage.setItem('token', res.data.token);\n    //             props.history.push('/market-price');\n    //         })\n    //         .catch(err => {\n    //             console.log(err.response);\n                // alert(\"Wrong user or password\");\n    //         });\n    // }\n\n    return (\n        <MainSection >\n            <NextBackNavigation back={() => props.history.goBack()} next={() => props.history.goForward()} />\n\n            <div className=\"image-container\"></div>\n\n            <FormContainer>\n                <Form style={formStyle}>\n\n                    <h2 style={labelStyle}>YOUR INFORMATION</h2>\n\n                    <Field style={inputStyle} type=\"text\" name=\"username\"  placeholder=\"USERNAME\" />\n\n                    <Field  style={inputStyle} type=\"email\" name=\"email\"  placeholder=\"EMAIL\" />\n\n                    <Field  style={inputStyle} type=\"password\" name=\"password\" placeholder=\"PASSWORD\" />\n\n                    <CustomButton  type='submit'>Sign Up</CustomButton>\n                    <Link to=\"/login\">create account</Link>\n\n                    {touched.username && errors.username && <p>{errors.username}</p>}\n                    {touched.email && errors.email && <p>{errors.email}</p>}\n                    {touched.password && errors.password && <p>{errors.password}</p>}\n\n                    \n                </Form>\n            </FormContainer>\n        </MainSection>\n    );\n}\n\nconst FormikRegister = withFormik({\n    mapPropsToValues({username, password, email}) {\n        return {\n            username: '',\n            password: '',\n            email: ''\n        };\n    },\n    handleSubmit(values, {props, setStatues, resetForm}) {\n        console.group('submitting...', values);\n        let name = values.username;\n        axiosWithAuth()\n            .post(\"https://build-week-africanmarketplace.herokuapp.com/api/auth/register\", values)\n            .then(res => {\n                axiosWithAuth()\n                    .get('https://build-week-africanmarketplace.herokuapp.com/api/users')\n                    .then(res => {\n                        console.log(name);\n                        var found = res.data.find(function (element) {\n                            return element.username === name;\n                        });\n                        // console.log(this.props);\n                        console.log(props);\n                        props.dispatch({ type: 'USERNAME', username: found.id });\n\n                    })\n                    .catch(err => console.log(err)); \n                localStorage.setItem('token', res.data.token);\n                props.history.push('/market-price');\n            })\n            .catch(err => {\n                console.log(err.response);\n                alert(\"Wrong user or password\");\n            })\n    },\n    validationSchema: Yup.object().shape({\n        username: Yup.string()\n            .required(\"Username is a required field\"),\n        password: Yup.string()\n            .min(6, \"Password must be at least 6 characters\")\n            .required(\"Password is a required field\"),\n        email: Yup.string()\n            .email('Invalid Email')\n            .required(\"email is a required field\")\n    }),\n\n})(Register);\n\n// export default FormikRegister;\nexport default connect()(FormikRegister);\n\n"]},"metadata":{},"sourceType":"module"}